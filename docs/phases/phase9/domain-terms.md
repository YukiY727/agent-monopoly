# Phase 9 ドメイン用語集

**Phase 9**: 詳細統計の追加

---

## 1. 統計分析用語

### 1.1 ROI (Return on Investment)

**定義**: 投資利益率。投資額に対するリターンの割合

**Phase 9での計算**:
```
ROI = (総レント収入 / プロパティ価格) / ゲーム数
```

**例**:
- Mediterranean Avenue (価格: $60)
- 100ゲーム中、50ゲームで購入
- 総レント収入: $1,500
- ROI = (1500 / 60) / 100 = 0.25 (25%)

### 1.2 Purchase Rate（購入率）

**定義**: プロパティが購入される頻度

**計算**:
```
購入率 = 購入された回数 / 総ゲーム数
```

### 1.3 Win Rate When Owned（所有時勝率）

**定義**: そのプロパティを所有したプレイヤーの勝率

**意味**: プロパティの価値を示す指標。高いほど重要なプロパティ

---

## 2. データ構造

### 2.1 PropertyStatistics（プロパティ統計）

**定義**: 個別のプロパティに関する統計情報

**含まれるデータ**:
- 購入回数
- レント収入
- ROI
- 勝利への貢献度

### 2.2 AssetHistory（資産推移）

**定義**: ゲーム進行中の資産の変化を記録したデータ

**用途**:
- プレイヤーの成長パターン分析
- 戦略の効果測定
- グラフ化による可視化

### 2.3 AssetSnapshot（資産スナップショット）

**定義**: 特定のターンにおける資産状態の記録

**含まれる情報**:
- ターン番号
- 現金
- 総資産
- 所有プロパティ数

### 2.4 BankruptcyAnalysis（破産分析）

**定義**: ゲーム内の破産イベントを分析したデータ

**分析項目**:
- 破産タイミング
- 破産の原因
- プレイヤー別破産率

---

## 3. 分析手法

### 3.1 Time Series Analysis（時系列分析）

**定義**: 時間経過に伴うデータの変化を分析する手法

**Phase 9での適用**:
- ターンごとの資産推移
- 破産タイミングの分布

### 3.2 Distribution Analysis（分布分析）

**定義**: データの散らばり具合を分析する手法

**Phase 9での適用**:
- 破産ターンの分布
- プロパティ購入頻度の分布

### 3.3 Ranking（ランキング）

**定義**: データを特定の基準で順位付けすること

**Phase 9でのランキング**:
- プロパティ別ROIランキング
- 破産させたプレイヤーランキング

---

## 4. グラフ種類

### 4.1 Line Chart（折れ線グラフ）

**定義**: 連続的なデータの変化を線で表現したグラフ

**Phase 9での用途**: ターンごとの資産推移

**特徴**:
- 時系列データに最適
- 複数の系列を比較可能
- トレンドが視覚的に理解しやすい

### 4.2 Ranking Table（ランキング表）

**定義**: データを順位付けして表形式で表示

**Phase 9での用途**: プロパティ別収益性ランキング

### 4.3 Distribution Histogram（分布ヒストグラム）

**定義**: データの分布を示すグラフ

**Phase 9での用途**: 破産タイミングの分布

---

## 5. プロパティ関連用語

### 5.1 Rent Collection（レント収集）

**定義**: プロパティ所有者が他のプレイヤーから受け取るレント

**Phase 9での追跡**:
- プロパティごとの総レント収入
- ゲームあたりの平均レント
- 単一ゲームでの最大レント

### 5.2 Color Group（色グループ）

**定義**: 同じ色のプロパティのセット

**Phase 9での分析**:
- 色グループ別の収益性比較
- セット完成の効果測定

### 5.3 Property Value（プロパティ価値）

**定義**: プロパティの戦略的価値

**評価指標**:
- ROI
- 所有時勝率
- レント収入

---

## 6. 破産関連用語

### 6.1 Bankruptcy（破産）

**定義**: プレイヤーの現金がマイナスになり、ゲームから脱落すること

### 6.2 Bankruptcy Event（破産イベント）

**定義**: 破産が発生した時点の情報を記録したデータ

**記録内容**:
- ゲーム番号
- ターン番号
- 破産プレイヤー
- 破産させたプレイヤー
- 破産時の資産状況

### 6.3 Bankruptcy Distribution（破産分布）

**定義**: 破産が発生したターンの頻度分布

**分析目的**:
- 早期破産 vs 後期破産の傾向
- 戦略による破産タイミングの違い

### 6.4 Creditor（債権者）

**定義**: 破産を引き起こしたプレイヤー

**Phase 9での追跡**: 破産させたプレイヤーのランキング

---

## 7. 統計計算関連

### 7.1 Aggregation（集約）

**定義**: 複数のデータを統合して一つの値を算出すること

**Phase 9での例**:
- 複数ゲームの平均ROI
- プレイヤー別の平均資産推移

### 7.2 Filtering（フィルタリング）

**定義**: 特定の条件に合うデータのみを抽出すること

**Phase 9での例**:
```kotlin
events.filterIsInstance<GameEvent.RentPaid>()
    .filter { it.property.name == "Boardwalk" }
```

### 7.3 Grouping（グループ化）

**定義**: データを特定の基準でグループ分けすること

**Phase 9での例**:
```kotlin
bankruptcyEvents.groupBy { it.turnNumber / 10 }
```

---

## 8. パフォーマンス関連

### 8.1 Sampling（サンプリング）

**定義**: データの一部を抽出して分析に使用すること

**Phase 9での適用**:
- 資産推移を全ターンではなくN ターンごとに記録
- メモリ使用量の削減

### 8.2 Memory Footprint（メモリフットプリント）

**定義**: プログラムが使用するメモリ量

**Phase 9での課題**:
- 資産推移の記録でメモリ使用量が増加
- サンプリングや集約で対策

---

## 9. クラス・コンポーネント

### 9.1 DetailedStatisticsCalculator

**定義**: 詳細統計を計算するクラス

**責務**:
- プロパティ統計の計算
- 資産推移の記録
- 破産分析の実施

### 9.2 LineChartGenerator

**定義**: 折れ線グラフを生成するクラス

**責務**:
- SVGで折れ線グラフを描画
- 複数の系列を同一グラフに表示
- 凡例の生成

### 9.3 PropertyStatistics

**定義**: プロパティごとの統計データ

### 9.4 AssetHistory

**定義**: 資産推移のデータ構造

### 9.5 BankruptcyAnalysis

**定義**: 破産分析のデータ構造

---

## 10. 分析指標

### 10.1 Average Rent Per Game（ゲームあたり平均レント）

**定義**: プロパティが1ゲームあたりに生み出す平均レント収入

**計算**:
```
平均レント = 総レント収入 / 購入回数
```

### 10.2 Max Rent In Single Game（単一ゲーム最大レント）

**定義**: 1つのゲーム内でそのプロパティから得られた最大レント

**用途**: プロパティのポテンシャル測定

### 10.3 Average Bankruptcy Turn（平均破産ターン）

**定義**: 破産が発生する平均的なターン数

**用途**: ゲームの長さや戦略の激しさを評価

---

**作成日**: 2025-11-16
