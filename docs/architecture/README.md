# アーキテクチャドキュメント

このディレクトリには、モノポリー研究プラットフォームのアーキテクチャに関する専門的なドキュメントが含まれています。

## 📚 ドキュメント構成

### 📐 アーキテクチャ原則

- **[アーキテクチャ原則](architecture-principles.md)** - トレードオフを考慮したアーキテクチャ意思決定の原則と手法

### 🔍 パターン比較

- **[パターン比較](patterns-comparison.md)** - 各アーキテクチャパターンの詳細な比較検討

### 📝 Architecture Decision Records (ADR)

- **[ADRディレクトリ](adr/)** - 重要なアーキテクチャ決定の記録

主要なADR:
- [ADR-0001: モノリスアーキテクチャの採用](adr/0001-monolith-architecture.md)
- [ADR-0002: イベント駆動アーキテクチャの採用](adr/0002-event-driven-architecture.md)
- [ADR-0003: Kotlinをコア言語として採用](adr/0003-kotlin-as-core-language.md)
- [ADR-0004: レイヤードアーキテクチャの採用](adr/0004-layered-architecture.md)

---

## 🎯 このドキュメントの目的

### アーキテクトとしての意思決定を支援

このドキュメント群は、以下の目的で作成されています：

1. **トレードオフの明確化**: 各アーキテクチャ選択肢のメリット・デメリットを客観的に評価
2. **意思決定の記録**: なぜその選択をしたのか、背景と理由を文書化
3. **将来の見直し**: 状況変化に応じてアーキテクチャを再評価するための基盤
4. **知識の共有**: チームメンバーや将来の開発者がアーキテクチャの背景を理解

### 「全てのアーキテクチャはトレードオフである」の実践

完璧なアーキテクチャは存在しません。このドキュメント群では：

- 各選択肢の**得られるもの**と**失うもの**を明示
- プロジェクトの価値観（**保守性 > パフォーマンス > 開発速度**）に基づいた評価
- **実測**と**段階的な投資**を重視した意思決定プロセスの記録

---

## 📖 読み方ガイド

### アーキテクトとして意思決定を行う場合

1. **[アーキテクチャ原則](architecture-principles.md)** でトレードオフ分析の手法を理解
2. **[パターン比較](patterns-comparison.md)** で具体的な選択肢を検討
3. **[ADR](adr/)** で過去の決定を参照し、同じ文脈で判断
4. 新しい決定は新しいADRとして記録

### プロジェクトのアーキテクチャを理解する場合

1. **[ADR](adr/)** の主要な決定を読む
   - ADR-0001（モノリス）
   - ADR-0002（イベント駆動）
   - ADR-0003（Kotlin）
   - ADR-0004（レイヤード）
2. **[パターン比較](patterns-comparison.md)** で採用されなかった選択肢も理解
3. **[アーキテクチャ原則](architecture-principles.md)** で判断基準を把握

### 特定の技術選択を検討する場合

1. **[パターン比較](patterns-comparison.md)** で該当するパターンの比較を確認
2. プロジェクトの価値観とトレードオフを照らし合わせる
3. 必要に応じてベンチマーク・プロトタイプで検証
4. 決定したら新しいADRを作成

---

## 🔗 関連ドキュメント

- [claude.md](../../claude.md) - プロジェクト全体の価値観と設計原則
- [技術選定](../planning/technology-selection.md) - 技術スタックの段階的な選定戦略
- [開発計画](../planning/development-plan.md) - アーキテクチャ方針と開発フェーズ

---

## 📝 ADRの作成方法

新しいアーキテクチャ決定を行う場合は、以下の手順でADRを作成してください：

1. `adr/template.md` をコピー
2. ファイル名を `XXXX-decision-title.md` に変更（XXXXは連番）
3. テンプレートに従って記述
4. `adr/` ディレクトリに配置
5. このREADME.mdのADRリストに追加

### ADRの原則

- **不変**: 一度記録したADRは変更しない（新しいADRで更新・廃止を記録）
- **簡潔**: 1つのADRは1つの決定のみを記録
- **トレードオフ重視**: メリットだけでなくデメリットも必ず記載
- **コンテキスト明記**: なぜその時点でその決定をしたのか、状況を記録

---

## 🎨 アーキテクチャの進化

このプロジェクトのアーキテクチャは**段階的に進化**します：

### Phase 1-7: シンプルなモノリス

- **焦点**: ドメインロジックの正確な実装
- **アーキテクチャ**: Kotlinモノリス、レイヤードアーキテクチャ
- **優先事項**: 保守性、型安全性

### Phase 8: パフォーマンス評価

- **焦点**: 並列実行のベンチマーク
- **意思決定ポイント**: Go並列エンジン追加の要否を判断
- **判断基準**: 10,000ゲーム/分達成できるか

### Phase 10: 強化学習統合

- **焦点**: Python強化学習エージェントとの統合
- **アーキテクチャ**: プロセス間通信（JSON/gRPC）
- **優先事項**: インターフェースの明確化、Pythonの影響範囲の限定

### Phase 13: Web UI

- **焦点**: TypeScriptフロントエンドとの統合
- **アーキテクチャ**: REST API + WebSocket
- **優先事項**: API設計、型安全な通信

各フェーズでの決定は、対応するADRとして記録されます。

---

## 📊 アーキテクチャ決定の可視化

```
価値観: 保守性 > パフォーマンス > 開発速度
         ↓
トレードオフ分析（パターン比較）
         ↓
実測・検証（必要に応じて）
         ↓
意思決定
         ↓
ADRとして記録
         ↓
実装
         ↓
振り返り（各Phase完了時）
         ↓
必要に応じて再評価・新しいADR
```

---

**作成日**: 2025-11-15
